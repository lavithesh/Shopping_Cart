<section 
  style="
    background-image: url('/images/15.jpg');
    width: 100%;
    min-height: 100vh;
    background-size: cover;
    background-position: center;
    padding-top: 50px;
    padding-bottom: 50px;
  "
>
  <div class="container">
    <div 
      class="table-responsive shadow-lg p-4" 
      style="
        border-radius: 20px;
        background: rgba(255, 255, 255, 0.85);
        backdrop-filter: blur(8px);
      "
    >
      <table class="table table-bordered text-center align-middle">
        <thead style="background-color: #343a40; color: white; border-radius: 10px;">
          <tr>
            <th scope="col" style="font-style: italic;">Item</th>
            <th scope="col" style="font-style: italic;">Title</th>
            <th scope="col" style="font-style: italic;">Price</th>
            <th scope="col" style="font-style: italic;">Quantity</th>
            <th scope="col" style="font-style: italic;">Action</th>
          </tr>
        </thead>
        <tbody>
          {{#each products}}
          <tr style="background-color: rgba(255,255,255,0.7);">
            <td>
              <img 
                src="/product-images/{{productDetails._id}}.png" 
                alt="{{productDetails.Name}}" 
                style="width: 70px; height: 70px; object-fit: cover; border-radius: 10px;"
              >
            </td>
            <td style="font-weight: 500;">{{productDetails.Name}}</td>
            <td>Rs. {{productDetails.Price}}</td>
            <td>
              <button 
                class="btn btn-outline-dark btn-sm" 
                style="border-radius: 50%; width: 30px; height: 30px;" 
                onclick="changeQuantity('{{this._id}}', '{{productDetails._id}}', -1)"
              >âˆ’</button>

              <span style="margin: 0 10px; font-weight: 600;">{{this.quantity}}</span>

              <button 
                class="btn btn-outline-dark btn-sm" 
                style="border-radius: 50%; width: 30px; height: 30px;" 
                onclick="changeQuantity('{{this._id}}', '{{productDetails._id}}', 1)"
              >+</button>
            </td>
            <td>
              <button 
                class="btn btn-danger btn-sm" 
                style="border-radius: 8px; font-weight: 500;" 
                onclick="removeFromCart('{{this._id}}', '{{productDetails._id}}')"
              >
                Remove
              </button>
            </td>
          </tr>
          {{/each}}
        </tbody>
      </table>

      <div class="d-flex justify-content-between align-items-center mt-4">
        <h3 style="font-style: italic; color: #000; font-weight: 600;">Total: Rs. {{total}}</h3>
        <a 
          href="/place-order" 
          class="btn btn-success" 
          style="
            width: 200px; 
            border-radius: 10px 40px;
            font-weight: 600;
            background-color: #28a745;
            border: none;
            transition: 0.3s;
          "
          onmouseover="this.style.backgroundColor='#218838'"
          onmouseout="this.style.backgroundColor='#28a745'"
        >
          Place Order
        </a>
      </div>
    </div>
  </div>
</section>

<!-- Scripts remain identical (no functionality change) -->
<script>
  function changeQuantity(cartId, proId, count) {
    $.ajax({
      url: '/change-product-quantity',
      type: 'POST',
      contentType: 'application/json',
      data: JSON.stringify({ cartId, proId, count }),
      success: (response) => {
        if (response.success) {
          location.reload();
        } else {
          alert('Error updating quantity');
        }
      },
      error: (xhr, status, error) => {
        console.error('AJAX Error:', status, error);
        alert('An error occurred while updating the quantity.');
      }
    });
  }

  function removeFromCart(cartId, proId) {
    $.ajax({
      url: '/remove-from-cart',
      type: 'POST',
      contentType: 'application/json',
      data: JSON.stringify({ cartId, proId }),
      success: (response) => {
        if (response.success) {
          location.reload();
        } else {
          alert('Error removing item');
        }
      },
      error: (xhr, status, error) => {
        console.error('AJAX Error:', status, error);
        alert('An error occurred while removing the item.');
      }
    });
  }
</script>
