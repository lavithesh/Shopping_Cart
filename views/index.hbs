<section style="background-color: #f8f9fa; min-height: 100vh; padding-top: 30px;">
  <div class="container">
    <h2 class="text-center mb-4" style="font-style: italic; color: rgb(37, 169, 37);">
      Available Products <i class="bi bi-bag-fill"></i>
    </h2>

    <div class="row">
      {{#each products}}
      <div class="col-md-3 mb-4 d-flex align-items-stretch">
        <div class="card shadow-sm border-0 w-100" style="border-radius: 15px; overflow: hidden;">
          <div style="
              width: 100%;
              height: 220px;
              background-image: url('/product-images/{{this._id}}.png');
              background-size: 100% 100%;
              background-repeat: no-repeat;
              background-position: center;
            ">
          </div>

          <div class="card-body text-center d-flex flex-column justify-content-between">
            <div>
              <h5 class="card-title" style="font-weight: bold;">{{this.Name}}</h5>
              <p class="card-text mb-1" style="font-style: italic;">{{this.Category}}</p>
              <p class="card-text mb-1 text-success">â‚¹{{this.Price}}</p>
              <p class="card-text" style="font-size: 14px;">{{this.Description}}</p>
            </div>

            <button onclick="addToCart('{{this._id}}')" 
                    class="btn btn-outline-success mt-3" 
                    style="border-radius: 20px; width: 100%;">
              Add to Cart <i class="bi bi-cart"></i>
            </button>
          </div>
        </div>
      </div>
      {{/each}}
    </div>
  </div>
</section>

<script>
  function addToCart(proId) {
    $.ajax({
      url: '/add-to-cart/' + proId,
      method: 'get',
      success: function (response) {
        if (response.status) {
          let count = $('#cart-count').html()
          count = parseInt(count) + 1
          $('#cart-count').html(count)
        }
      }
    })
  }
</script>
